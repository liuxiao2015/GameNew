server:
  port: 9060

spring:
  application:
    name: service-pay
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  
  # MongoDB 配置
  data:
    mongodb:
      uri: mongodb://${MONGO_HOST:localhost}:${MONGO_PORT:27017}/${MONGO_DATABASE:game_server}?authSource=${MONGO_AUTH_DB:game_server}&maxPoolSize=3&maxIdleTimeMS=30000&retryWrites=false
      database: ${MONGO_DATABASE:game_server}
      auto-index-creation: true
      uuid-representation: standard
      # 注意：如需认证，请在 URI 中指定或使用环境变量
      # uri: mongodb://username:password@localhost:27017/game_server
    
    # Redis 配置（Redisson使用 - 单机模式）
    # 注意：Redisson配置由 frame-redis 模块的 RedisAutoConfiguration 自动处理
    # 仅支持单机模式，适用于阿里云 Tair 代理模式
    redis:
      # 单机模式配置（适用于 Tair 代理模式）
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:123456}
      database: ${REDIS_DB:1}
      timeout: 3s
      connect-timeout: 3s

# Dubbo
dubbo:
  application:
    name: service-pay
    qos-enable: false
  registry:
    address: nacos://${NACOS_HOST:localhost}:8848
    parameters:
      namespace: ${NACOS_NAMESPACE:dev}
  protocol:
    name: dubbo
    port: 20860
  provider:
    timeout: 5000
    retries: 0
  consumer:
    timeout: 5000
    check: false

# 支付配置
pay:
  # 订单过期时间(分钟)
  order-expire-minutes: 30
  
  # 微信支付
  wechat:
    enabled: ${WECHAT_PAY_ENABLED:false}
    app-id: ${WECHAT_APP_ID:}
    mch-id: ${WECHAT_MCH_ID:}
    api-key: ${WECHAT_API_KEY:}
    notify-url: ${WECHAT_NOTIFY_URL:}
    cert-path: ${WECHAT_CERT_PATH:}
  
  # 支付宝
  alipay:
    enabled: ${ALIPAY_ENABLED:false}
    app-id: ${ALIPAY_APP_ID:}
    private-key: ${ALIPAY_PRIVATE_KEY:}
    public-key: ${ALIPAY_PUBLIC_KEY:}
    notify-url: ${ALIPAY_NOTIFY_URL:}
  
  # 苹果内购
  apple:
    enabled: ${APPLE_IAP_ENABLED:false}
    bundle-id: ${APPLE_BUNDLE_ID:}
    shared-secret: ${APPLE_SHARED_SECRET:}
    sandbox: ${APPLE_SANDBOX:true}
  
  # Google Play
  google:
    enabled: ${GOOGLE_PAY_ENABLED:false}
    package-name: ${GOOGLE_PACKAGE_NAME:}
    credentials-path: ${GOOGLE_CREDENTIALS_PATH:}

# 日志配置
logging:
  level:
    com.game: INFO
    org.apache.dubbo: WARN
