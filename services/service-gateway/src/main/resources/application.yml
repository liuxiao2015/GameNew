# ==================== 网关服务配置 ====================

spring:
  application:
    name: gateway-server
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  # Redis 配置
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:123456}
      database: ${REDIS_DB:1}
      timeout: 3s
      connect-timeout: 3s

# ==================== 服务端口 ====================
server:
  port: ${SERVER_PORT:8080}
  # 优雅停机
  shutdown: graceful

# ==================== 网关配置 ====================
gateway:
  # TCP 配置
  tcp:
    enabled: true
    port: ${GATEWAY_TCP_PORT:9000}
    boss-threads: 1
    worker-threads: 0  # 0 表示使用 CPU 核心数 * 2
    backlog: 1024
    # 心跳配置
    heartbeat:
      interval-seconds: 30
      timeout-seconds: 90
  # WebSocket 配置
  websocket:
    enabled: true
    port: ${GATEWAY_WS_PORT:9001}
    path: /ws
  # 限流配置
  rate-limit:
    enabled: true
    global-qps: 10000
    ip-qps: 100
    user-qps: 50

# ==================== Dubbo 配置 ====================
dubbo:
  application:
    name: ${spring.application.name}
    qos-enable: false
  registry:
    address: nacos://${NACOS_ADDR:localhost:8848}
    parameters:
      namespace: ${NACOS_NAMESPACE:public}
  consumer:
    timeout: 5000
    retries: 0
    check: false
    loadbalance: consistenthash

# ==================== 日志配置 ====================
logging:
  config: classpath:logback-spring.xml
  level:
    com.game: ${LOG_LEVEL:DEBUG}
