# ==================== GM 运营后台服务配置 ====================

spring:
  application:
    name: service-gm
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  # MongoDB 配置
  data:
    mongodb:
      uri: mongodb://${MONGO_HOST:localhost}:${MONGO_PORT:27017}/${MONGO_DATABASE:game_server}?authSource=${MONGO_AUTH_DB:game_server}&maxPoolSize=3&maxIdleTimeMS=30000&retryWrites=false
      database: ${MONGO_DATABASE:game_server}
      auto-index-creation: true
      uuid-representation: standard
    # Redis 配置
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:123456}
      database: ${REDIS_DB:1}
      timeout: 3s
      connect-timeout: 3s
  # Spring Security 配置
  security:
    user:
      name: ${GM_ADMIN_USER:admin}
      password: ${GM_ADMIN_PASS:admin123}

# ==================== 服务端口 ====================
server:
  port: ${SERVER_PORT:8090}
  # 优雅停机
  shutdown: graceful

# ==================== Actuator 配置 ====================
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: when_authorized

# ==================== Dubbo 配置 ====================
dubbo:
  application:
    name: ${spring.application.name}
    qos-enable: false
  registry:
    address: nacos://${NACOS_ADDR:localhost:8848}
    parameters:
      namespace: ${NACOS_NAMESPACE:public}
  consumer:
    timeout: 10000
    retries: 0
    check: false

# ==================== GM 配置 ====================
game:
  gm:
    # JWT 密钥
    jwt-secret: ${GM_JWT_SECRET:game-gm-jwt-secret-key-2024}
    # Token 过期时间 (小时)
    token-expire-hours: 8

# ==================== SpringDoc OpenAPI 配置 ====================
springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
    doc-expansion: none
    display-request-duration: true
  # 扫描的包路径
  packages-to-scan: com.game.service.gm.controller
  # 显示 actuator 端点
  show-actuator: false

# ==================== 日志配置 ====================
logging:
  config: classpath:logback-spring.xml
  level:
    com.game: ${LOG_LEVEL:DEBUG}
