syntax = "proto3";

package game.proto;

option java_package = "com.game.proto";
option java_outer_classname = "ChatProto";
option java_multiple_files = false;

import "common.proto";

// ==================== 聊天协议 (7000-7999) ====================

// 发送聊天消息请求 (协议号: 7001)
message SendChatRequest {
    int32 channel = 1;           // 频道 (1:世界 2:公会 3:私聊 4:系统)
    string content = 2;          // 聊天内容
    int64 target_id = 3;         // 目标 ID (私聊时为对方角色 ID)
}

// 发送聊天消息响应
message SendChatResponse {
    Result result = 1;
    int64 msg_id = 2;            // 消息 ID
}

// 获取聊天记录请求 (协议号: 7002)
message GetChatHistoryRequest {
    int32 channel = 1;           // 频道
    int64 target_id = 2;         // 目标 ID (私聊时)
    int64 last_msg_id = 3;       // 上一条消息 ID (用于分页)
    int32 count = 4;             // 获取数量
}

// 获取聊天记录响应
message GetChatHistoryResponse {
    Result result = 1;
    repeated ChatMessage messages = 2;
}

// 聊天消息
message ChatMessage {
    int64 msg_id = 1;            // 消息 ID
    int32 channel = 2;           // 频道
    int64 sender_id = 3;         // 发送者 ID
    string sender_name = 4;      // 发送者名字
    int32 sender_level = 5;      // 发送者等级
    int32 sender_avatar = 6;     // 发送者头像
    int32 sender_vip = 7;        // 发送者 VIP 等级
    string content = 8;          // 聊天内容
    int64 send_time = 9;         // 发送时间
    int64 target_id = 10;        // 目标 ID
    string target_name = 11;     // 目标名字
}

// ==================== 推送消息 ====================

// 聊天消息推送
message ChatMessagePush {
    ChatMessage message = 1;
}

// 系统公告推送
message SystemNoticePush {
    int32 notice_type = 1;       // 公告类型 (1:滚动 2:弹窗 3:邮件)
    string title = 2;            // 标题
    string content = 3;          // 内容
    int64 start_time = 4;        // 开始时间
    int64 end_time = 5;          // 结束时间
}
