syntax = "proto3";

package game.proto;

option java_package = "com.game.proto";
option java_outer_classname = "PlayerProto";
option java_multiple_files = false;

import "common.proto";

// ==================== 玩家协议 (2000-2999) ====================

// 获取玩家信息请求 (协议号: 2001)
message GetPlayerInfoRequest {
    int64 role_id = 1;           // 角色 ID (0 表示自己)
}

// 获取玩家信息响应
message GetPlayerInfoResponse {
    Result result = 1;
    PlayerInfo player = 2;
}

// 玩家信息
message PlayerInfo {
    int64 role_id = 1;
    string role_name = 2;
    int32 level = 3;
    int64 exp = 4;
    int64 gold = 5;
    int64 diamond = 6;
    int32 vip_level = 7;
    int32 avatar_id = 8;
    int32 frame_id = 9;
    int32 energy = 10;
    int32 max_energy = 11;
    int64 guild_id = 12;
    string guild_name = 13;
    int64 combat_power = 14;     // 战斗力
    string signature = 15;       // 签名
}

// 修改玩家名字请求 (协议号: 2002)
message ChangeNameRequest {
    string new_name = 1;
}

// 修改玩家名字响应
message ChangeNameResponse {
    Result result = 1;
    string new_name = 2;
}

// 修改头像请求 (协议号: 2003)
message ChangeAvatarRequest {
    int32 avatar_id = 1;
}

// 修改头像响应
message ChangeAvatarResponse {
    Result result = 1;
    int32 avatar_id = 2;
}

// 修改签名请求 (协议号: 2004)
message ChangeSignatureRequest {
    string signature = 1;
}

// 修改签名响应
message ChangeSignatureResponse {
    Result result = 1;
    string signature = 2;
}

// 获取背包请求 (协议号: 2010)
message GetBagRequest {
    int32 bag_type = 1;          // 背包类型 (0:全部)
}

// 获取背包响应
message GetBagResponse {
    Result result = 1;
    repeated ItemInstance items = 2;
    int32 capacity = 3;          // 背包容量
}

// 使用物品请求 (协议号: 2011)
message UseItemRequest {
    int64 item_uid = 1;          // 物品唯一 ID
    int32 count = 2;             // 使用数量
    int64 target_id = 3;         // 目标 ID (可选)
}

// 使用物品响应
message UseItemResponse {
    Result result = 1;
    RewardInfo reward = 2;       // 使用后获得的奖励
}

// 出售物品请求 (协议号: 2012)
message SellItemRequest {
    int64 item_uid = 1;          // 物品唯一 ID
    int32 count = 2;             // 出售数量
}

// 出售物品响应
message SellItemResponse {
    Result result = 1;
    int64 gold = 2;              // 获得金币
}

// 整理背包请求 (协议号: 2013)
message ArrangeBagRequest {
    int32 bag_type = 1;          // 背包类型
}

// 整理背包响应
message ArrangeBagResponse {
    Result result = 1;
    repeated ItemInstance items = 2; // 整理后的物品列表
}

// ==================== 推送消息 ====================

// 玩家属性变化推送
message PlayerAttrChangePush {
    int32 attr_type = 1;         // 属性类型
    int64 old_value = 2;         // 旧值
    int64 new_value = 3;         // 新值
    string reason = 4;           // 变化原因
}

// 升级推送
message LevelUpPush {
    int32 old_level = 1;
    int32 new_level = 2;
    RewardInfo reward = 3;       // 升级奖励
}

// 物品变化推送
message ItemChangePush {
    int32 change_type = 1;       // 变化类型 (1:增加 2:减少 3:修改)
    ItemInstance item = 2;       // 变化的物品
    string reason = 3;           // 变化原因
}
